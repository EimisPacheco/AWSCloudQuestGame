{"ast":null,"code":"var _jsxFileName = \"/Users/eimis/test-server/react_projects/legendary-lines-game/src/components/Game.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport MagicalQuestionCard from './MagicalQuestionCard';\nimport InputModal from './InputModal';\nimport { getPhrase, checkAnswer } from '../services/aiService';\nimport '../styles/Game.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CATEGORIES = {\n  SONG: {\n    name: 'Song',\n    points: 1\n  },\n  MOVIE: {\n    name: 'Movie',\n    points: 2\n  },\n  FAMOUS_PERSON: {\n    name: 'Famous Person',\n    points: 3\n  },\n  FICTIONAL_CHARACTER: {\n    name: 'Fictional Character',\n    points: 3\n  },\n  BOOK: {\n    name: 'Book',\n    points: 4\n  },\n  POET: {\n    name: 'Poet',\n    points: 5\n  },\n  QUOTE: {\n    name: 'Quote',\n    points: 6\n  }\n};\nconst Game = _ref => {\n  _s();\n  let {\n    difficulty,\n    numberOfRounds\n  } = _ref;\n  // State declarations\n  const [currentPhrase, setCurrentPhrase] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [score, setScore] = useState(0);\n  const [streak, setStreak] = useState(0);\n  const [round, setRound] = useState(1);\n  const [triggerEffect, setTriggerEffect] = useState(0);\n  const [showResult, setShowResult] = useState(null);\n  const [showAnswerModal, setShowAnswerModal] = useState(false);\n  const [currentQuestionType, setCurrentQuestionType] = useState('source');\n  const [phraseData, setPhraseData] = useState(null);\n  const [previousScore, setPreviousScore] = useState(0);\n\n  // Add new states for the conversation flow\n  const [playerNickname, setPlayerNickname] = useState('');\n  const [gamePhase, setGamePhase] = useState('greeting');\n  const [aiMessage, setAiMessage] = useState('');\n\n  // Add new states for bonus question flow\n  const [isAwaitingBonusConfirmation, setIsAwaitingBonusConfirmation] = useState(false);\n  const [conversationHistory, setConversationHistory] = useState([]);\n\n  // Add new state to track round points\n  const [roundPoints, setRoundPoints] = useState(0);\n\n  // Add this inside the Game component, with other state declarations\n  const fireworksAudio = useRef(new Audio('https://hackthon-backend-files-ep-2024.s3.us-east-1.amazonaws.com/games/fireworks-sound.mp3'));\n  useEffect(() => {\n    // Initial greeting\n    setAiMessage(\"Hey there, superstar! ðŸŒŸ\\n\" + \"Ready to dive into the most epic game of wit and wisdom? ðŸš€\\n\" + \"First things first - what awesome nickname should I call you? ðŸ˜Ž\");\n    setShowAnswerModal(true);\n  }, []);\n  const handlePlayerInput = async input => {\n    switch (gamePhase) {\n      case 'greeting':\n        setPlayerNickname(input);\n        setGamePhase('playing');\n        setAiMessage(\"\".concat(input, \"! Love that name! \\uD83C\\uDFAF\\nAlright hotshot, pick your poison - which category are you brave enough to tackle first? \\uD83D\\uDCAA\"));\n        setShowAnswerModal(false);\n        break;\n      case 'playing':\n        if (!phraseData) {\n          await handleCategorySelect(input.toUpperCase());\n        } else {\n          try {\n            if (isAwaitingBonusConfirmation) {\n              const bonusQuestion = {\n                type: 'bonus_question',\n                questionType: currentQuestionType,\n                playerAnswer: input\n              };\n              const result = await checkAnswer(input, 'yes', 'bonus_confirmation', [...conversationHistory, bonusQuestion]);\n              if (result.isBonusResponse) {\n                if (result.isCorrect) {\n                  setIsAwaitingBonusConfirmation(false);\n                  const promptMessage = currentQuestionType === 'year' ? \"Enter the year...\" : \"Enter the \".concat(selectedCategory === 'MOVIE' ? 'director' : 'artist', \"...\");\n                  setAiMessage(promptMessage);\n                } else {\n                  setAiMessage(\"Alright! You keep your \".concat(roundPoints, \" points for this round. \\uD83C\\uDFAF\"));\n                  setTimeout(() => handleNextRound(), 2000);\n                }\n              }\n              return;\n            }\n            const correctAnswer = currentQuestionType === 'creator' ? phraseData.additionalInfo.creator : phraseData[currentQuestionType];\n            const result = await checkAnswer(input, correctAnswer, currentQuestionType, conversationHistory);\n            handleAnswerResult(result);\n          } catch (error) {\n            console.error('Error checking answer:', error);\n            setAiMessage('Sorry, there was an error checking your answer. Please try again.');\n          }\n        }\n        break;\n    }\n  };\n  const handleAnswerResult = result => {\n    if (result.isCorrect) {\n      const currentPoints = calculatePoints(selectedCategory, currentQuestionType);\n      const newRoundPoints = roundPoints + currentPoints;\n      const newTotalScore = score + currentPoints;\n      setRoundPoints(newRoundPoints);\n      setScore(newTotalScore);\n\n      // Array of fun, encouraging messages\n      const successMessages = [\"BOOM! ðŸŽ¯ Nailed it!\", \"You're on fire! ðŸ”¥\", \"Now that's what I'm talking about! âš¡\", \"Absolutely crushed it! ðŸ’ª\", \"You're making this look easy! ðŸŒŸ\", \"Mind = Blown! ðŸ¤¯\"];\n      const feedbackMessage = successMessages[Math.floor(Math.random() * successMessages.length)];\n      if (currentQuestionType === 'source') {\n        setAiMessage(\"\".concat(feedbackMessage, \"\\n\\n\\uD83D\\uDCAB Sweet moves! You just snagged \").concat(currentPoints, \" point! (Total score: \").concat(newTotalScore, \")\\n\\nFeeling lucky? Want to double those points by guessing the year? (Yes/No) \\uD83D\\uDE0F\"));\n        setIsAwaitingBonusConfirmation(true);\n        setCurrentQuestionType('year');\n      } else if (currentQuestionType === 'year' && ['MOVIE', 'SONG', 'BOOK'].includes(selectedCategory)) {\n        const creatorType = selectedCategory === 'MOVIE' ? 'director' : selectedCategory === 'SONG' ? 'artist' : 'author';\n        setAiMessage(\"\".concat(feedbackMessage, \"\\n\\n\\uD83C\\uDF1F You're crushing it! \").concat(currentPoints, \" more points in the bag! (Total score: \").concat(newTotalScore, \")\\n\\nUp for a challenge? Triple your points by naming the \").concat(creatorType, \"! What do you say, champion? (Yes/No) \\uD83D\\uDE0E\"));\n        setIsAwaitingBonusConfirmation(true);\n        setCurrentQuestionType('creator');\n      } else {\n        const maxPoints = getMaxPointsForCategory(selectedCategory);\n        let message = \"\".concat(feedbackMessage, \"\\n\\n\\uD83C\\uDFAF BAM! Another \").concat(currentPoints, \" points! (Total score: \").concat(newTotalScore, \")\");\n        if (newRoundPoints === maxPoints) {\n          message += \"\\n\\n\\uD83C\\uDF8A HOLY MOLY! You just DOMINATED this category with a perfect \".concat(maxPoints, \" points! You're an absolute legend! \\uD83C\\uDFC6\");\n          setTriggerEffect(prev => prev + 1);\n          fireworksAudio.current.currentTime = 0;\n          fireworksAudio.current.play();\n          setTimeout(() => {\n            fireworksAudio.current.pause();\n            fireworksAudio.current.currentTime = 0;\n          }, 3000);\n        }\n        setAiMessage(message);\n        setTimeout(() => handleNextRound(), 2000);\n      }\n      setStreak(prev => prev + 1);\n      updateConversationHistory(result.feedback, true);\n    } else {\n      handleIncorrectAnswer(result.feedback);\n      updateConversationHistory(result.feedback, false);\n    }\n  };\n\n  // Update the conversation history function to include more context\n  const updateConversationHistory = (feedback, wasCorrect) => {\n    const newEntry = {\n      round,\n      category: selectedCategory,\n      questionType: currentQuestionType,\n      wasCorrect,\n      feedback,\n      isAwaitingBonus: isAwaitingBonusConfirmation,\n      timestamp: new Date().toISOString()\n    };\n    setConversationHistory(prev => [...prev, newEntry]);\n  };\n  const handleCategorySelect = async category => {\n    // Check if category was already played in conversation history\n    const categoryPlayed = conversationHistory.some(entry => entry.category === category);\n    setSelectedCategory(category);\n    try {\n      const data = await getPhrase(category, difficulty, categoryPlayed ? conversationHistory : undefined);\n      setPhraseData(data);\n      setAiMessage(\"\\uD83C\\uDFAD Here's your \".concat(category.toLowerCase(), \" phrase:\\n\\n\\\"\").concat(data.phrase, \"\\\"\\n\\n\\uD83E\\uDD14 Can you tell me the source?\"));\n      setTriggerEffect(prev => prev + 1);\n      setCurrentQuestionType('source');\n      setIsAwaitingBonusConfirmation(false);\n      setTimeout(() => {\n        setShowAnswerModal(true);\n      }, 1000);\n    } catch (error) {\n      console.error('Error fetching phrase:', error);\n      setAiMessage('ðŸ˜… Oops! Had trouble fetching a phrase. Try another category!');\n    }\n  };\n  const getPromptForPhase = (phase, questionType) => {\n    switch (phase) {\n      case 'greeting':\n        return 'Enter your nickname...';\n      case 'playing':\n        switch (questionType) {\n          case 'source':\n            return 'Enter the source...';\n          case 'year':\n            return 'Enter the year...';\n          case 'creator':\n            switch (selectedCategory) {\n              case 'MOVIE':\n                return 'Enter the director...';\n              case 'SONG':\n                return 'Enter the artist/band...';\n              case 'BOOK':\n                return 'Enter the author...';\n              default:\n                return 'Enter the creator...';\n            }\n          default:\n            return 'Enter your answer...';\n        }\n      default:\n        return 'Enter your response...';\n    }\n  };\n  const handleNextRound = () => {\n    if (round < numberOfRounds) {\n      setPreviousScore(score);\n      setRoundPoints(0);\n      setRound(prev => prev + 1);\n      setSelectedCategory(null);\n      setCurrentQuestionType('source');\n      setPhraseData(null);\n      setCurrentPhrase(null);\n      setAiMessage(\"Alright \".concat(playerNickname, \", you're on a roll! \\uD83C\\uDFB2\\nTime to conquer round \").concat(round + 1, \"! Which category's calling your name? \\uD83C\\uDF1F\"));\n    } else {\n      // Game Over with more personality\n      const finalMessage = score === numberOfRounds * 6 ? \"\\uD83C\\uDFC6 ABSOLUTELY INCREDIBLE! \".concat(score, \" POINTS?! You're not just a player, you're a LEGEND! Take a bow, champion! \\uD83C\\uDF89\") : \"Game over, superstar! \".concat(score, \" points - not too shabby! \\uD83C\\uDF1F Come back and show me what else you've got! \\uD83D\\uDCAA\");\n      setAiMessage(finalMessage);\n      setGamePhase('completed');\n    }\n    setShowAnswerModal(false);\n  };\n  const handleIncorrectAnswer = feedback => {\n    const correctAnswer = currentQuestionType === 'creator' ? phraseData.additionalInfo.creator : phraseData[currentQuestionType];\n    const pointsLost = calculatePointsLost();\n\n    // Array of encouraging \"wrong answer\" messages\n    const wrongAnswerMessages = [\"Aw, not quite! ðŸŽ¯\", \"Close one! ðŸŒŸ\", \"Nice try, but not this time! ðŸ’«\", \"Almost had it! â­\", \"Don't sweat it, champ! ðŸŒ \"];\n    const randomMessage = wrongAnswerMessages[Math.floor(Math.random() * wrongAnswerMessages.length)];\n    setAiMessage(\"\".concat(randomMessage, \"\\nIt was \\\"\").concat(correctAnswer, \"\\\"\\n\\n\\uD83D\\uDCAB Lost \").concat(pointsLost, \" points this round (Total score: \").concat(previousScore, \")\\nBut hey, you've got this! Next one's yours! \\uD83D\\uDCAA\"));\n    setTriggerEffect(prev => prev + 1);\n    setScore(previousScore);\n    setStreak(0);\n    setTimeout(() => {\n      handleNextRound();\n    }, 3000);\n  };\n  const calculatePoints = (category, questionType) => {\n    const basePoints = CATEGORIES[category].points;\n    switch (questionType) {\n      case 'source':\n        return basePoints;\n      case 'year':\n        return basePoints * 2;\n      case 'creator':\n        return basePoints * 3;\n      default:\n        return basePoints;\n    }\n  };\n\n  // Update getMaxPointsForCategory to be more precise\n  const getMaxPointsForCategory = category => {\n    const basePoints = CATEGORIES[category].points;\n    if (['SONG', 'MOVIE', 'BOOK'].includes(category)) {\n      // For Song (1 point base):\n      // Base (1) + Year (2) + Artist (3) = 6 points total\n      return basePoints + basePoints * 2 + basePoints * 3;\n    }\n\n    // For other categories:\n    // Base + Year (double) = Base * 3 total\n    return basePoints * 3;\n  };\n\n  // Helper function to calculate points lost on incorrect answer\n  const calculatePointsLost = () => {\n    const pointsEarned = score - previousScore;\n    return pointsEarned > 0 ? pointsEarned : 0;\n  };\n  function handleInputSubmission(inputValue) {\n    // Ensure inputValue is being processed correctly\n    if (inputValue) {\n      // Logic to send inputValue to the AI\n      console.log(\"My input value is:\", inputValue);\n      handlePlayerInput(inputValue);\n    } else {\n      console.error(\"Input value is empty\");\n    }\n  }\n\n  // Add this function before the return statement in Game component\n  const isRoundComplete = (category, currentScore, prevScore) => {\n    if (!category || !CATEGORIES[category]) {\n      return false;\n    }\n    console.log('Round completion check:', {\n      category,\n      roundPoints,\n      maxPoints: getMaxPointsForCategory(category),\n      currentScore,\n      prevScore\n    });\n    return roundPoints === getMaxPointsForCategory(category);\n  };\n\n  // Add cleanup for audio when component unmounts\n  useEffect(() => {\n    return () => {\n      fireworksAudio.current.pause();\n      fireworksAudio.current.currentTime = 0;\n    };\n  }, []);\n\n  // JSX Return\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Round: \", round, \"/\", numberOfRounds]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Score: \", score]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Streak: \", streak]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MagicalQuestionCard, {\n      message: aiMessage,\n      triggerEffect: triggerEffect,\n      isRoundComplete: selectedCategory ? isRoundComplete(selectedCategory, score, previousScore) : false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InputModal, {\n      isOpen: showAnswerModal,\n      onSubmit: handleInputSubmission,\n      prompt: getPromptForPhase(gamePhase, currentQuestionType)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this), gamePhase === 'playing' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Available Categories:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-buttons\",\n        children: Object.entries(CATEGORIES).map(_ref2 => {\n          let [key, value] = _ref2;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"category-btn \".concat(selectedCategory === key ? 'selected' : ''),\n            onClick: () => handleCategorySelect(key),\n            children: [value.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"points\",\n              children: [\"(\", value.points, \" pts)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 364,\n    columnNumber: 5\n  }, this);\n};\n_s(Game, \"8e2eiLP40oG3pKolf5Wk0hd8Fb4=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useState","useEffect","useRef","MagicalQuestionCard","InputModal","getPhrase","checkAnswer","jsxDEV","_jsxDEV","CATEGORIES","SONG","name","points","MOVIE","FAMOUS_PERSON","FICTIONAL_CHARACTER","BOOK","POET","QUOTE","Game","_ref","_s","difficulty","numberOfRounds","currentPhrase","setCurrentPhrase","selectedCategory","setSelectedCategory","score","setScore","streak","setStreak","round","setRound","triggerEffect","setTriggerEffect","showResult","setShowResult","showAnswerModal","setShowAnswerModal","currentQuestionType","setCurrentQuestionType","phraseData","setPhraseData","previousScore","setPreviousScore","playerNickname","setPlayerNickname","gamePhase","setGamePhase","aiMessage","setAiMessage","isAwaitingBonusConfirmation","setIsAwaitingBonusConfirmation","conversationHistory","setConversationHistory","roundPoints","setRoundPoints","fireworksAudio","Audio","handlePlayerInput","input","concat","handleCategorySelect","toUpperCase","bonusQuestion","type","questionType","playerAnswer","result","isBonusResponse","isCorrect","promptMessage","setTimeout","handleNextRound","correctAnswer","additionalInfo","creator","handleAnswerResult","error","console","currentPoints","calculatePoints","newRoundPoints","newTotalScore","successMessages","feedbackMessage","Math","floor","random","length","includes","creatorType","maxPoints","getMaxPointsForCategory","message","prev","current","currentTime","play","pause","updateConversationHistory","feedback","handleIncorrectAnswer","wasCorrect","newEntry","category","isAwaitingBonus","timestamp","Date","toISOString","categoryPlayed","some","entry","data","undefined","toLowerCase","phrase","getPromptForPhase","phase","finalMessage","pointsLost","calculatePointsLost","wrongAnswerMessages","randomMessage","basePoints","pointsEarned","handleInputSubmission","inputValue","log","isRoundComplete","currentScore","prevScore","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onSubmit","prompt","Object","entries","map","_ref2","key","value","onClick","_c","$RefreshReg$"],"sources":["/Users/eimis/test-server/react_projects/legendary-lines-game/src/components/Game.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport MagicalQuestionCard from './MagicalQuestionCard';\nimport InputModal from './InputModal';\nimport { getPhrase, checkAnswer } from '../services/aiService';\nimport '../styles/Game.css';\n\nconst CATEGORIES = {\n  SONG: { name: 'Song', points: 1 },\n  MOVIE: { name: 'Movie', points: 2 },\n  FAMOUS_PERSON: { name: 'Famous Person', points: 3 },\n  FICTIONAL_CHARACTER: { name: 'Fictional Character', points: 3 },\n  BOOK: { name: 'Book', points: 4 },\n  POET: { name: 'Poet', points: 5 },\n  QUOTE: { name: 'Quote', points: 6 }\n};\n\nconst Game = ({ difficulty, numberOfRounds }) => {\n  // State declarations\n  const [currentPhrase, setCurrentPhrase] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [score, setScore] = useState(0);\n  const [streak, setStreak] = useState(0);\n  const [round, setRound] = useState(1);\n  const [triggerEffect, setTriggerEffect] = useState(0);\n  const [showResult, setShowResult] = useState(null);\n  const [showAnswerModal, setShowAnswerModal] = useState(false);\n  const [currentQuestionType, setCurrentQuestionType] = useState('source');\n  const [phraseData, setPhraseData] = useState(null);\n  const [previousScore, setPreviousScore] = useState(0);\n\n  // Add new states for the conversation flow\n  const [playerNickname, setPlayerNickname] = useState('');\n  const [gamePhase, setGamePhase] = useState('greeting');\n  const [aiMessage, setAiMessage] = useState('');\n\n  // Add new states for bonus question flow\n  const [isAwaitingBonusConfirmation, setIsAwaitingBonusConfirmation] = useState(false);\n  const [conversationHistory, setConversationHistory] = useState([]);\n\n  // Add new state to track round points\n  const [roundPoints, setRoundPoints] = useState(0);\n\n  // Add this inside the Game component, with other state declarations\n  const fireworksAudio = useRef(new Audio('https://hackthon-backend-files-ep-2024.s3.us-east-1.amazonaws.com/games/fireworks-sound.mp3'));\n\n  useEffect(() => {\n    // Initial greeting\n    setAiMessage(\"Hey there, superstar! ðŸŒŸ\\n\" +\n                 \"Ready to dive into the most epic game of wit and wisdom? ðŸš€\\n\" +\n                 \"First things first - what awesome nickname should I call you? ðŸ˜Ž\");\n    setShowAnswerModal(true);\n  }, []);\n\n  const handlePlayerInput = async (input) => {\n    switch(gamePhase) {\n      case 'greeting':\n        setPlayerNickname(input);\n        setGamePhase('playing');\n        setAiMessage(`${input}! Love that name! ðŸŽ¯\\nAlright hotshot, pick your poison - which category are you brave enough to tackle first? ðŸ’ª`);\n        setShowAnswerModal(false);\n        break;\n\n      case 'playing':\n        if (!phraseData) {\n          await handleCategorySelect(input.toUpperCase());\n        } else {\n          try {\n            if (isAwaitingBonusConfirmation) {\n              const bonusQuestion = {\n                type: 'bonus_question',\n                questionType: currentQuestionType,\n                playerAnswer: input\n              };\n              \n              const result = await checkAnswer(\n                input, \n                'yes',\n                'bonus_confirmation',\n                [...conversationHistory, bonusQuestion]\n              );\n\n              if (result.isBonusResponse) {\n                if (result.isCorrect) {\n                  setIsAwaitingBonusConfirmation(false);\n                  const promptMessage = currentQuestionType === 'year' \n                    ? \"Enter the year...\" \n                    : `Enter the ${selectedCategory === 'MOVIE' ? 'director' : 'artist'}...`;\n                  setAiMessage(promptMessage);\n                } else {\n                  setAiMessage(`Alright! You keep your ${roundPoints} points for this round. ðŸŽ¯`);\n                  setTimeout(() => handleNextRound(), 2000);\n                }\n              }\n              return;\n            }\n            \n            const correctAnswer = currentQuestionType === 'creator' \n              ? phraseData.additionalInfo.creator \n              : phraseData[currentQuestionType];\n\n            const result = await checkAnswer(\n              input, \n              correctAnswer, \n              currentQuestionType,\n              conversationHistory\n            );\n            \n            handleAnswerResult(result);\n          } catch (error) {\n            console.error('Error checking answer:', error);\n            setAiMessage('Sorry, there was an error checking your answer. Please try again.');\n          }\n        }\n        break;\n    }\n  };\n\n  const handleAnswerResult = (result) => {\n    if (result.isCorrect) {\n      const currentPoints = calculatePoints(selectedCategory, currentQuestionType);\n      const newRoundPoints = roundPoints + currentPoints;\n      const newTotalScore = score + currentPoints;\n      setRoundPoints(newRoundPoints);\n      setScore(newTotalScore);\n\n      // Array of fun, encouraging messages\n      const successMessages = [\n        \"BOOM! ðŸŽ¯ Nailed it!\",\n        \"You're on fire! ðŸ”¥\",\n        \"Now that's what I'm talking about! âš¡\",\n        \"Absolutely crushed it! ðŸ’ª\",\n        \"You're making this look easy! ðŸŒŸ\",\n        \"Mind = Blown! ðŸ¤¯\"\n      ];\n      \n      const feedbackMessage = successMessages[Math.floor(Math.random() * successMessages.length)];\n\n      if (currentQuestionType === 'source') {\n        setAiMessage(`${feedbackMessage}\\n\\nðŸ’« Sweet moves! You just snagged ${currentPoints} point! (Total score: ${newTotalScore})\\n\\nFeeling lucky? Want to double those points by guessing the year? (Yes/No) ðŸ˜`);\n        setIsAwaitingBonusConfirmation(true);\n        setCurrentQuestionType('year');\n      } else if (currentQuestionType === 'year' && \n                ['MOVIE', 'SONG', 'BOOK'].includes(selectedCategory)) {\n        const creatorType = selectedCategory === 'MOVIE' ? 'director' : \n                          selectedCategory === 'SONG' ? 'artist' : 'author';\n        setAiMessage(`${feedbackMessage}\\n\\nðŸŒŸ You're crushing it! ${currentPoints} more points in the bag! (Total score: ${newTotalScore})\\n\\nUp for a challenge? Triple your points by naming the ${creatorType}! What do you say, champion? (Yes/No) ðŸ˜Ž`);\n        setIsAwaitingBonusConfirmation(true);\n        setCurrentQuestionType('creator');\n      } else {\n        const maxPoints = getMaxPointsForCategory(selectedCategory);\n        \n        let message = `${feedbackMessage}\\n\\nðŸŽ¯ BAM! Another ${currentPoints} points! (Total score: ${newTotalScore})`;\n        \n        if (newRoundPoints === maxPoints) {\n          message += `\\n\\nðŸŽŠ HOLY MOLY! You just DOMINATED this category with a perfect ${maxPoints} points! You're an absolute legend! ðŸ†`;\n          setTriggerEffect(prev => prev + 1);\n          \n          fireworksAudio.current.currentTime = 0;\n          fireworksAudio.current.play();\n          \n          setTimeout(() => {\n            fireworksAudio.current.pause();\n            fireworksAudio.current.currentTime = 0;\n          }, 3000);\n        }\n        \n        setAiMessage(message);\n        setTimeout(() => handleNextRound(), 2000);\n      }\n\n      setStreak(prev => prev + 1);\n      updateConversationHistory(result.feedback, true);\n    } else {\n      handleIncorrectAnswer(result.feedback);\n      updateConversationHistory(result.feedback, false);\n    }\n  };\n\n  // Update the conversation history function to include more context\n  const updateConversationHistory = (feedback, wasCorrect) => {\n    const newEntry = {\n      round,\n      category: selectedCategory,\n      questionType: currentQuestionType,\n      wasCorrect,\n      feedback,\n      isAwaitingBonus: isAwaitingBonusConfirmation,\n      timestamp: new Date().toISOString()\n    };\n    setConversationHistory(prev => [...prev, newEntry]);\n  };\n\n  const handleCategorySelect = async (category) => {\n    // Check if category was already played in conversation history\n    const categoryPlayed = conversationHistory.some(\n      entry => entry.category === category\n    );\n\n    setSelectedCategory(category);\n    try {\n      const data = await getPhrase(category, difficulty, categoryPlayed ? conversationHistory : undefined);\n      setPhraseData(data);\n      setAiMessage(`ðŸŽ­ Here's your ${category.toLowerCase()} phrase:\\n\\n\"${data.phrase}\"\\n\\nðŸ¤” Can you tell me the source?`);\n      setTriggerEffect(prev => prev + 1);\n      setCurrentQuestionType('source');\n      setIsAwaitingBonusConfirmation(false);\n      setTimeout(() => {\n        setShowAnswerModal(true);\n      }, 1000);\n    } catch (error) {\n      console.error('Error fetching phrase:', error);\n      setAiMessage('ðŸ˜… Oops! Had trouble fetching a phrase. Try another category!');\n    }\n  };\n\n  const getPromptForPhase = (phase, questionType) => {\n    switch (phase) {\n      case 'greeting':\n        return 'Enter your nickname...';\n      case 'playing':\n        switch (questionType) {\n          case 'source':\n            return 'Enter the source...';\n          case 'year':\n            return 'Enter the year...';\n          case 'creator':\n            switch (selectedCategory) {\n              case 'MOVIE':\n                return 'Enter the director...';\n              case 'SONG':\n                return 'Enter the artist/band...';\n              case 'BOOK':\n                return 'Enter the author...';\n              default:\n                return 'Enter the creator...';\n            }\n          default:\n            return 'Enter your answer...';\n        }\n      default:\n        return 'Enter your response...';\n    }\n  };\n\n  const handleNextRound = () => {\n    if (round < numberOfRounds) {\n      setPreviousScore(score);\n      setRoundPoints(0);\n      setRound(prev => prev + 1);\n      setSelectedCategory(null);\n      setCurrentQuestionType('source');\n      setPhraseData(null);\n      setCurrentPhrase(null);\n      setAiMessage(`Alright ${playerNickname}, you're on a roll! ðŸŽ²\\nTime to conquer round ${round + 1}! Which category's calling your name? ðŸŒŸ`);\n    } else {\n      // Game Over with more personality\n      const finalMessage = score === (numberOfRounds * 6) \n        ? `ðŸ† ABSOLUTELY INCREDIBLE! ${score} POINTS?! You're not just a player, you're a LEGEND! Take a bow, champion! ðŸŽ‰` \n        : `Game over, superstar! ${score} points - not too shabby! ðŸŒŸ Come back and show me what else you've got! ðŸ’ª`;\n      setAiMessage(finalMessage);\n      setGamePhase('completed');\n    }\n    setShowAnswerModal(false);\n  };\n\n  const handleIncorrectAnswer = (feedback) => {\n    const correctAnswer = currentQuestionType === 'creator' \n      ? phraseData.additionalInfo.creator \n      : phraseData[currentQuestionType];\n      \n    const pointsLost = calculatePointsLost();\n    \n    // Array of encouraging \"wrong answer\" messages\n    const wrongAnswerMessages = [\n      \"Aw, not quite! ðŸŽ¯\",\n      \"Close one! ðŸŒŸ\",\n      \"Nice try, but not this time! ðŸ’«\",\n      \"Almost had it! â­\",\n      \"Don't sweat it, champ! ðŸŒ \"\n    ];\n    \n    const randomMessage = wrongAnswerMessages[Math.floor(Math.random() * wrongAnswerMessages.length)];\n    \n    setAiMessage(`${randomMessage}\\nIt was \"${correctAnswer}\"\\n\\nðŸ’« Lost ${pointsLost} points this round (Total score: ${previousScore})\\nBut hey, you've got this! Next one's yours! ðŸ’ª`);\n    setTriggerEffect(prev => prev + 1);\n    \n    setScore(previousScore);\n    setStreak(0);\n    \n    setTimeout(() => {\n      handleNextRound();\n    }, 3000);\n  };\n\n  const calculatePoints = (category, questionType) => {\n    const basePoints = CATEGORIES[category].points;\n    switch (questionType) {\n        case 'source': return basePoints;\n        case 'year': return basePoints * 2;\n        case 'creator': return basePoints * 3;\n        default: return basePoints;\n    }\n  };\n\n  // Update getMaxPointsForCategory to be more precise\n  const getMaxPointsForCategory = (category) => {\n    const basePoints = CATEGORIES[category].points;\n    \n    if (['SONG', 'MOVIE', 'BOOK'].includes(category)) {\n      // For Song (1 point base):\n      // Base (1) + Year (2) + Artist (3) = 6 points total\n      return basePoints + (basePoints * 2) + (basePoints * 3);\n    }\n    \n    // For other categories:\n    // Base + Year (double) = Base * 3 total\n    return basePoints * 3;\n  };\n\n  // Helper function to calculate points lost on incorrect answer\n  const calculatePointsLost = () => {\n    const pointsEarned = score - previousScore;\n    return pointsEarned > 0 ? pointsEarned : 0;\n  };\n\n  function handleInputSubmission(inputValue) {\n    // Ensure inputValue is being processed correctly\n    if (inputValue) {\n        // Logic to send inputValue to the AI\n        console.log(\"My input value is:\", inputValue);\n        handlePlayerInput(inputValue);\n    } else {\n        console.error(\"Input value is empty\");\n    }\n  }\n\n  // Add this function before the return statement in Game component\n  const isRoundComplete = (category, currentScore, prevScore) => {\n    if (!category || !CATEGORIES[category]) {\n      return false;\n    }\n\n    console.log('Round completion check:', {\n      category,\n      roundPoints,\n      maxPoints: getMaxPointsForCategory(category),\n      currentScore,\n      prevScore\n    });\n    \n    return roundPoints === getMaxPointsForCategory(category);\n  };\n\n  // Add cleanup for audio when component unmounts\n  useEffect(() => {\n    return () => {\n      fireworksAudio.current.pause();\n      fireworksAudio.current.currentTime = 0;\n    };\n  }, []);\n\n  // JSX Return\n  return (\n    <div className=\"game-container\">\n      <div className=\"game-header\">\n        <div>Round: {round}/{numberOfRounds}</div>\n        <div>Score: {score}</div>\n        <div>Streak: {streak}</div>\n      </div>\n\n      <MagicalQuestionCard \n        message={aiMessage}\n        triggerEffect={triggerEffect}\n        isRoundComplete={selectedCategory ? isRoundComplete(selectedCategory, score, previousScore) : false}\n      />\n\n      <InputModal \n        isOpen={showAnswerModal}\n        onSubmit={handleInputSubmission}\n        prompt={getPromptForPhase(gamePhase, currentQuestionType)}\n      />\n\n      {gamePhase === 'playing' && (\n        <div className=\"category-selector\">\n          <h3>Available Categories:</h3>\n          <div className=\"category-buttons\">\n            {Object.entries(CATEGORIES).map(([key, value]) => (\n              <button\n                key={key}\n                className={`category-btn ${selectedCategory === key ? 'selected' : ''}`}\n                onClick={() => handleCategorySelect(key)}\n              >\n                {value.name}\n                <span className=\"points\">({value.points} pts)</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}